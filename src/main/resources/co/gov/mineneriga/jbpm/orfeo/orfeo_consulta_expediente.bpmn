<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.omg.org/bpmn20" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:drools="http://www.jboss.org/drools" id="_iwMz4JyQEe22D6WH4M4Jpw" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd http://www.omg.org/spec/DD/20100524/DC DC.xsd http://www.omg.org/spec/DD/20100524/DI DI.xsd " exporter="jBPM Process Modeler" exporterVersion="2.0" targetNamespace="http://www.omg.org/bpmn20">
  <bpmn2:itemDefinition id="_outputItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="_loginItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_passwordItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_tokenItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="_expirationItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_nroexpedienteItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_existeExpedienteItem" structureRef="Boolean"/>
  <bpmn2:itemDefinition id="_expedienteDataItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="_tokenValidItem" structureRef="Boolean"/>
  <bpmn2:itemDefinition id="_baseUrlItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentDataInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentTypeInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_HeadersInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_MethodInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_UrlInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_CookieInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AcceptCharsetInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AcceptHeaderInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AuthTypeInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AuthUrlInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ConnectTimeoutInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentTypeCharsetInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_HandleResponseErrorsInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_PasswordInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ReadTimeoutInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ResultClassInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_UsernameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ResultOutputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentDataInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentTypeInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_MethodInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_UrlInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AcceptCharsetInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AcceptHeaderInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AuthTypeInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AuthUrlInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ConnectTimeoutInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentTypeCharsetInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_HandleResponseErrorsInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_HeadersInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_PasswordInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ReadTimeoutInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ResultClassInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_UsernameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ResultOutputXItem" structureRef="String"/>
  <bpmn2:process id="orfeo.consulta_expediente" drools:packageName="co.gov.minenergia.jpm.orfeo" drools:version="1.0" drools:adHoc="false" name="orfeo_consulta_expediente" isExecutable="true" processType="Public">
    <bpmn2:extensionElements>
      <drools:import name="org.json.JSONObject"/>
      <drools:import name="org.json.JSONArray"/>
      <drools:import name="java.time.Instant"/>
      <drools:global identifier="orfeoBaseUrl" type="String"/>
      <drools:global identifier="orfeoJbpmUser" type="String"/>
      <drools:global identifier="orfeoJbpmPassword" type="String"/>
    </bpmn2:extensionElements>
    <bpmn2:property id="output" itemSubjectRef="_outputItem" name="output">
      <bpmn2:extensionElements>
        <drools:metaData name="customTags">
          <drools:metaValue><![CDATA[internal]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:property>
    <bpmn2:property id="login" itemSubjectRef="_loginItem" name="login">
      <bpmn2:extensionElements>
        <drools:metaData name="customTags">
          <drools:metaValue><![CDATA[input]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:property>
    <bpmn2:property id="password" itemSubjectRef="_passwordItem" name="password">
      <bpmn2:extensionElements>
        <drools:metaData name="customTags">
          <drools:metaValue><![CDATA[input]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:property>
    <bpmn2:property id="token" itemSubjectRef="_tokenItem" name="token">
      <bpmn2:extensionElements>
        <drools:metaData name="customTags">
          <drools:metaValue><![CDATA[output]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:property>
    <bpmn2:property id="expiration" itemSubjectRef="_expirationItem" name="expiration">
      <bpmn2:extensionElements>
        <drools:metaData name="customTags">
          <drools:metaValue><![CDATA[output]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:property>
    <bpmn2:property id="nroexpediente" itemSubjectRef="_nroexpedienteItem" name="nroexpediente">
      <bpmn2:extensionElements>
        <drools:metaData name="customTags">
          <drools:metaValue><![CDATA[input]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:property>
    <bpmn2:property id="existeExpediente" itemSubjectRef="_existeExpedienteItem" name="existeExpediente">
      <bpmn2:extensionElements>
        <drools:metaData name="customTags">
          <drools:metaValue><![CDATA[output]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:property>
    <bpmn2:property id="expedienteData" itemSubjectRef="_expedienteDataItem" name="expedienteData">
      <bpmn2:extensionElements>
        <drools:metaData name="customTags">
          <drools:metaValue><![CDATA[output]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:property>
    <bpmn2:property id="tokenValid" itemSubjectRef="_tokenValidItem" name="tokenValid">
      <bpmn2:extensionElements>
        <drools:metaData name="customTags">
          <drools:metaValue><![CDATA[internal]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:property>
    <bpmn2:property id="baseUrl" itemSubjectRef="_baseUrlItem" name="baseUrl"/>
    <bpmn2:sequenceFlow id="_8E6B8D9E-D0A0-434F-981B-CA82436470BB" sourceRef="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE" targetRef="_93593817-D3D6-48F9-B062-B59C802715AA"/>
    <bpmn2:sequenceFlow id="_099BF8D1-9C99-4589-86B4-5D82D47F85DD" sourceRef="_93593817-D3D6-48F9-B062-B59C802715AA" targetRef="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA"/>
    <bpmn2:sequenceFlow id="_99E8C1B1-5770-43BF-9DAA-300C24696F3A" sourceRef="_3CD9910C-CF3B-4AEF-AB08-F51EA9978199" targetRef="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE"/>
    <bpmn2:sequenceFlow id="_D4419464-49DA-4745-8328-CC6BB604D206" name="No" sourceRef="_16896F13-C509-4B1F-8C32-A30AE51623B0" targetRef="_3CD9910C-CF3B-4AEF-AB08-F51EA9978199">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[No]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_iwOCAJyQEe22D6WH4M4Jpw" language="http://www.java.com/java"><![CDATA[String tok = (String) kcontext.getVariable("token");
return KieFunctions.isEmpty(tok);]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_A51EB380-F0FF-408C-9851-7CC2E606B0B4" name="No" sourceRef="_BB60150A-B524-45C8-AEA3-E32322B96A60" targetRef="_3CD9910C-CF3B-4AEF-AB08-F51EA9978199">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[No]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_59452036-2EA8-414C-8B94-C53483323374" name="Si" sourceRef="_BB60150A-B524-45C8-AEA3-E32322B96A60" targetRef="_93593817-D3D6-48F9-B062-B59C802715AA">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Si]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_iwOCAZyQEe22D6WH4M4Jpw" language="http://www.java.com/java"><![CDATA[return KieFunctions.isTrue(tokenValid);]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_AA48F45F-1583-4B19-9D49-EA3B8BDD7004" sourceRef="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA" targetRef="_0056CD9A-2489-44E5-B0B8-8CBDC0D1CB42"/>
    <bpmn2:sequenceFlow id="_99B3861C-478E-49AA-ADDD-62102809B0CD" sourceRef="_726AC429-57AF-4D0A-BBFB-4433496BCEB9" targetRef="_16896F13-C509-4B1F-8C32-A30AE51623B0"/>
    <bpmn2:sequenceFlow id="_D9058452-9D9E-4337-866E-67632DD43D80" sourceRef="_F19827B4-3027-407C-9748-7B82997CC616" targetRef="_726AC429-57AF-4D0A-BBFB-4433496BCEB9"/>
    <bpmn2:sequenceFlow id="_ADE23ED9-ABF5-42DE-8369-417BFB70C30E" sourceRef="_1DC0616D-FAF3-48BD-89FD-C80B9FC061D9" targetRef="_BB60150A-B524-45C8-AEA3-E32322B96A60"/>
    <bpmn2:sequenceFlow id="_5CB56892-9F5B-4C1A-A195-39BEE2FD7E19" name="Si" sourceRef="_16896F13-C509-4B1F-8C32-A30AE51623B0" targetRef="_1DC0616D-FAF3-48BD-89FD-C80B9FC061D9">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Si]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:task id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE" drools:taskName="Rest" name="Login">
      <bpmn2:documentation id="_iwOCApyQEe22D6WH4M4Jpw"><![CDATA[jbpm-workitems-rest/index.html]]></bpmn2:documentation>
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Login]]></drools:metaValue>
        </drools:metaData>
        <drools:onEntry-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("=== Ejecutando Login ===");
]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("despues de ejecucion rest " + output);
String outputrest = (String) kcontext.getVariable("output");
org.json.JSONObject response = new JSONObject(outputrest);

kcontext.setVariable("token", response.getString("token"));
kcontext.setVariable("expiration",  response.getString("expires"));
System.out.println("-- Variables --");
System.out.println("token: " + kcontext.getVariable("token"));
System.out.println("expiration: " + kcontext.getVariable("expiration"));

]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_99E8C1B1-5770-43BF-9DAA-300C24696F3A</bpmn2:incoming>
      <bpmn2:outgoing>_8E6B8D9E-D0A0-434F-981B-CA82436470BB</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_iwOCA5yQEe22D6WH4M4Jpw">
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentDataInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentDataInputXItem" name="ContentData"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentTypeInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentTypeInputXItem" name="ContentType"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_MethodInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_MethodInputXItem" name="Method"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_UrlInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_UrlInputXItem" name="Url"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AcceptCharsetInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AcceptCharsetInputXItem" name="AcceptCharset"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AcceptHeaderInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AcceptHeaderInputXItem" name="AcceptHeader"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AuthTypeInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AuthTypeInputXItem" name="AuthType"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AuthUrlInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AuthUrlInputXItem" name="AuthUrl"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ConnectTimeoutInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ConnectTimeoutInputXItem" name="ConnectTimeout"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentTypeCharsetInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentTypeCharsetInputXItem" name="ContentTypeCharset"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_HandleResponseErrorsInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_HandleResponseErrorsInputXItem" name="HandleResponseErrors"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_HeadersInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_HeadersInputXItem" name="Headers"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_PasswordInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_PasswordInputXItem" name="Password"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ReadTimeoutInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ReadTimeoutInputXItem" name="ReadTimeout"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ResultClassInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ResultClassInputXItem" name="ResultClass"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_UsernameInputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_UsernameInputXItem" name="Username"/>
        <bpmn2:dataInput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_TaskNameInputX" drools:dtype="Object" name="TaskName"/>
        <bpmn2:dataOutput id="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ResultOutputX" drools:dtype="String" itemSubjectRef="__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ResultOutputXItem" name="Result"/>
        <bpmn2:inputSet id="_iwOCBJyQEe22D6WH4M4Jpw">
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentDataInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentTypeInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_MethodInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_UrlInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AcceptCharsetInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AcceptHeaderInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AuthTypeInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_AuthUrlInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ConnectTimeoutInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentTypeCharsetInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_HandleResponseErrorsInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_HeadersInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_PasswordInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ReadTimeoutInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ResultClassInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_UsernameInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_iwOCBZyQEe22D6WH4M4Jpw">
          <bpmn2:dataOutputRefs>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ResultOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_iwOCBpyQEe22D6WH4M4Jpw">
        <bpmn2:targetRef>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentDataInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_iwOCB5yQEe22D6WH4M4Jpw">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_iwOCCJyQEe22D6WH4M4Jpw"><![CDATA[login=#{login}&password=#{password}]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_iwOCCZyQEe22D6WH4M4Jpw">_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentDataInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_iwOCCpyQEe22D6WH4M4Jpw">
        <bpmn2:targetRef>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentTypeInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_iwOCC5yQEe22D6WH4M4Jpw">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_iwOCDJyQEe22D6WH4M4Jpw"><![CDATA[application/x-www-form-urlencoded]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_iwOCDZyQEe22D6WH4M4Jpw">_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ContentTypeInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_iwOCDpyQEe22D6WH4M4Jpw">
        <bpmn2:targetRef>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_MethodInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_iwOCD5yQEe22D6WH4M4Jpw">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_iwOCEJyQEe22D6WH4M4Jpw"><![CDATA[POST]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_iwOCEZyQEe22D6WH4M4Jpw">_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_MethodInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_iwOCEpyQEe22D6WH4M4Jpw">
        <bpmn2:targetRef>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_UrlInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_iwOCE5yQEe22D6WH4M4Jpw">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_iwOCFJyQEe22D6WH4M4Jpw"><![CDATA[#{baseUrl}/auth/]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_iwOCFZyQEe22D6WH4M4Jpw">_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_UrlInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_iwOCFpyQEe22D6WH4M4Jpw">
        <bpmn2:targetRef>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_iwOCF5yQEe22D6WH4M4Jpw">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_iwOCGJyQEe22D6WH4M4Jpw"><![CDATA[Rest]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_iwOCGZyQEe22D6WH4M4Jpw">_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_iwOCGpyQEe22D6WH4M4Jpw">
        <bpmn2:sourceRef>_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_ResultOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>output</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:exclusiveGateway id="_16896F13-C509-4B1F-8C32-A30AE51623B0" drools:dg="_5CB56892-9F5B-4C1A-A195-39BEE2FD7E19" name="Se recibio token?" gatewayDirection="Diverging" default="_5CB56892-9F5B-4C1A-A195-39BEE2FD7E19">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Se recibio token?]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_99B3861C-478E-49AA-ADDD-62102809B0CD</bpmn2:incoming>
      <bpmn2:outgoing>_5CB56892-9F5B-4C1A-A195-39BEE2FD7E19</bpmn2:outgoing>
      <bpmn2:outgoing>_D4419464-49DA-4745-8328-CC6BB604D206</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:exclusiveGateway id="_93593817-D3D6-48F9-B062-B59C802715AA" name="Exclusive Consultar Expediente" gatewayDirection="Converging">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Exclusive Consultar Expediente]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_59452036-2EA8-414C-8B94-C53483323374</bpmn2:incoming>
      <bpmn2:incoming>_8E6B8D9E-D0A0-434F-981B-CA82436470BB</bpmn2:incoming>
      <bpmn2:outgoing>_099BF8D1-9C99-4589-86B4-5D82D47F85DD</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:task id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA" drools:taskName="Rest" name="Consultar Expediente">
      <bpmn2:documentation id="_iwOCG5yQEe22D6WH4M4Jpw"><![CDATA[jbpm-workitems-rest/index.html]]></bpmn2:documentation>
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Consultar Expediente]]></drools:metaValue>
        </drools:metaData>
        <drools:onEntry-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("== Consultar el expediente [" + nroexpediente + "] ===");
String tk = (String) kcontext.getVariable("token");
System.out.println("token: " + tk);]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[String expedienteDataRes = null;

if (kcontext.getVariable("expedienteData") != null) {
    expedienteDataRes = (String) kcontext.getVariable("expedienteData");
}

System.out.println("- Se obtuvo como resultado expedienteData: " + expedienteDataRes);

if (expedienteDataRes != null) {
    
    org.json.JSONObject object = new org.json.JSONObject(expedienteDataRes);
    
    if (object != null && object.getInt("responseCode") == 200) {
        kcontext.setVariable("existeExpediente", true);
    }
    else {
        kcontext.setVariable("existeExpediente", false);
    }
    //Imprimimos si existe el expediente
    System.out.println("- existeExpediente: " + kcontext.getVariable("existeExpediente"));
}]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_099BF8D1-9C99-4589-86B4-5D82D47F85DD</bpmn2:incoming>
      <bpmn2:outgoing>_AA48F45F-1583-4B19-9D49-EA3B8BDD7004</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_iwOCHJyQEe22D6WH4M4Jpw">
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentDataInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentDataInputXItem" name="ContentData"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentTypeInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentTypeInputXItem" name="ContentType"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_HeadersInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_HeadersInputXItem" name="Headers"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_MethodInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_MethodInputXItem" name="Method"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_UrlInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_UrlInputXItem" name="Url"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_CookieInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_CookieInputXItem" name="Cookie"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AcceptCharsetInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AcceptCharsetInputXItem" name="AcceptCharset"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AcceptHeaderInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AcceptHeaderInputXItem" name="AcceptHeader"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AuthTypeInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AuthTypeInputXItem" name="AuthType"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AuthUrlInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AuthUrlInputXItem" name="AuthUrl"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ConnectTimeoutInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ConnectTimeoutInputXItem" name="ConnectTimeout"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentTypeCharsetInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentTypeCharsetInputXItem" name="ContentTypeCharset"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_HandleResponseErrorsInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_HandleResponseErrorsInputXItem" name="HandleResponseErrors"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_PasswordInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_PasswordInputXItem" name="Password"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ReadTimeoutInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ReadTimeoutInputXItem" name="ReadTimeout"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ResultClassInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ResultClassInputXItem" name="ResultClass"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_UsernameInputX" drools:dtype="String" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_UsernameInputXItem" name="Username"/>
        <bpmn2:dataInput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_TaskNameInputX" drools:dtype="Object" name="TaskName"/>
        <bpmn2:dataOutput id="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ResultOutputX" drools:dtype="Object" itemSubjectRef="__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ResultOutputXItem" name="Result"/>
        <bpmn2:inputSet id="_iwOCHZyQEe22D6WH4M4Jpw">
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentDataInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentTypeInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_HeadersInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_MethodInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_UrlInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_CookieInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AcceptCharsetInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AcceptHeaderInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AuthTypeInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_AuthUrlInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ConnectTimeoutInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentTypeCharsetInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_HandleResponseErrorsInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_PasswordInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ReadTimeoutInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ResultClassInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_UsernameInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_iwOCHpyQEe22D6WH4M4Jpw">
          <bpmn2:dataOutputRefs>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ResultOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_iwOCH5yQEe22D6WH4M4Jpw">
        <bpmn2:targetRef>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentDataInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_iwOCIJyQEe22D6WH4M4Jpw">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_iwOCIZyQEe22D6WH4M4Jpw"><![CDATA[nroExpediente=#{nroexpediente}]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_iwOCIpyQEe22D6WH4M4Jpw">_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentDataInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_iwOCI5yQEe22D6WH4M4Jpw">
        <bpmn2:targetRef>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentTypeInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_iwOCJJyQEe22D6WH4M4Jpw">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_iwOCJZyQEe22D6WH4M4Jpw"><![CDATA[application/x-www-form-urlencoded]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_iwOCJpyQEe22D6WH4M4Jpw">_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ContentTypeInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_iwOCJ5yQEe22D6WH4M4Jpw">
        <bpmn2:targetRef>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_HeadersInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_iwOCKJyQEe22D6WH4M4Jpw">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_iwOCKZyQEe22D6WH4M4Jpw"><![CDATA[Content-Type=application/x-www-form-urlencoded;Authorization=Bearer #{token}]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_iwOCKpyQEe22D6WH4M4Jpw">_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_HeadersInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_iwOCK5yQEe22D6WH4M4Jpw">
        <bpmn2:targetRef>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_MethodInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_iwOCLJyQEe22D6WH4M4Jpw">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_iwOCLZyQEe22D6WH4M4Jpw"><![CDATA[POST]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_iwOCLpyQEe22D6WH4M4Jpw">_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_MethodInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_iwOCL5yQEe22D6WH4M4Jpw">
        <bpmn2:targetRef>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_UrlInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_iwOCMJyQEe22D6WH4M4Jpw">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_iwOCMZyQEe22D6WH4M4Jpw"><![CDATA[#{baseUrl}/exptejbpm]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_iwOCMpyQEe22D6WH4M4Jpw">_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_UrlInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_iwOCM5yQEe22D6WH4M4Jpw">
        <bpmn2:targetRef>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_iwOCNJyQEe22D6WH4M4Jpw">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_iwOCNZyQEe22D6WH4M4Jpw"><![CDATA[Rest]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_iwOCNpyQEe22D6WH4M4Jpw">_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_iwOCN5yQEe22D6WH4M4Jpw">
        <bpmn2:sourceRef>_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_ResultOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>expedienteData</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:exclusiveGateway id="_3CD9910C-CF3B-4AEF-AB08-F51EA9978199" name="Exclusive Login" gatewayDirection="Converging">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Exclusive Login]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_A51EB380-F0FF-408C-9851-7CC2E606B0B4</bpmn2:incoming>
      <bpmn2:incoming>_D4419464-49DA-4745-8328-CC6BB604D206</bpmn2:incoming>
      <bpmn2:outgoing>_99E8C1B1-5770-43BF-9DAA-300C24696F3A</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:exclusiveGateway id="_BB60150A-B524-45C8-AEA3-E32322B96A60" drools:dg="_A51EB380-F0FF-408C-9851-7CC2E606B0B4" name="Token valido?" gatewayDirection="Diverging" default="_A51EB380-F0FF-408C-9851-7CC2E606B0B4">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Token valido?]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_ADE23ED9-ABF5-42DE-8369-417BFB70C30E</bpmn2:incoming>
      <bpmn2:outgoing>_59452036-2EA8-414C-8B94-C53483323374</bpmn2:outgoing>
      <bpmn2:outgoing>_A51EB380-F0FF-408C-9851-7CC2E606B0B4</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:startEvent id="_F19827B4-3027-407C-9748-7B82997CC616" name="Inicio">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Inicio]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:outgoing>_D9058452-9D9E-4337-866E-67632DD43D80</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:endEvent id="_0056CD9A-2489-44E5-B0B8-8CBDC0D1CB42" name="Fin">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Fin]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_AA48F45F-1583-4B19-9D49-EA3B8BDD7004</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:scriptTask id="_726AC429-57AF-4D0A-BBFB-4433496BCEB9" name="Set from Globals" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Set from Globals]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_D9058452-9D9E-4337-866E-67632DD43D80</bpmn2:incoming>
      <bpmn2:outgoing>_99B3861C-478E-49AA-ADDD-62102809B0CD</bpmn2:outgoing>
      <bpmn2:script><![CDATA[System.out.println("- Seteando variables locales de globales --");

kcontext.setVariable("baseUrl", context.getVariable("orfeoBaseUrl"));
kcontext.setVariable("login", context.getVariable("orfeoJbpmUser"));
kcontext.setVariable("password", context.getVariable("orfeoJbpmPassword"));

System.out.println("baseUrl: " + kcontext.getVariable("baseUrl"));
System.out.println("login: " + kcontext.getVariable("login"));
System.out.println("password: " + kcontext.getVariable("password"));]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_1DC0616D-FAF3-48BD-89FD-C80B9FC061D9" name="Validar expiration token" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Validar expiration token]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_5CB56892-9F5B-4C1A-A195-39BEE2FD7E19</bpmn2:incoming>
      <bpmn2:outgoing>_ADE23ED9-ABF5-42DE-8369-417BFB70C30E</bpmn2:outgoing>
      <bpmn2:script><![CDATA[String expirationTimeStamp = (String) kcontext.getVariable("expiration");
Instant now = Instant.now();
Instant timestamp = Instant.ofEpochMilli(Long.valueOf(expirationTimeStamp));
if (now.isBefore(timestamp)) {
    System.out.println("Token is valid!");
    kcontext.setVariable("tokenValid", true);
}
else {
    System.out.println("Token is NOT valid!");
    kcontext.setVariable("tokenValid", false);
}
]]></bpmn2:script>
    </bpmn2:scriptTask>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="_iwPQIJyQEe22D6WH4M4Jpw">
    <bpmndi:BPMNPlane id="_iwPQIZyQEe22D6WH4M4Jpw" bpmnElement="orfeo.consulta_expediente">
      <bpmndi:BPMNShape id="shape__1DC0616D-FAF3-48BD-89FD-C80B9FC061D9" bpmnElement="_1DC0616D-FAF3-48BD-89FD-C80B9FC061D9">
        <dc:Bounds height="102.0" width="154.0" x="340.0" y="31.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__726AC429-57AF-4D0A-BBFB-4433496BCEB9" bpmnElement="_726AC429-57AF-4D0A-BBFB-4433496BCEB9">
        <dc:Bounds height="102.0" width="154.0" x="161.0" y="201.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__0056CD9A-2489-44E5-B0B8-8CBDC0D1CB42" bpmnElement="_0056CD9A-2489-44E5-B0B8-8CBDC0D1CB42">
        <dc:Bounds height="56.0" width="56.0" x="1342.0" y="200.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__F19827B4-3027-407C-9748-7B82997CC616" bpmnElement="_F19827B4-3027-407C-9748-7B82997CC616">
        <dc:Bounds height="56.0" width="56.0" x="31.0" y="224.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__BB60150A-B524-45C8-AEA3-E32322B96A60" bpmnElement="_BB60150A-B524-45C8-AEA3-E32322B96A60">
        <dc:Bounds height="56.0" width="56.0" x="568.0" y="54.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__3CD9910C-CF3B-4AEF-AB08-F51EA9978199" bpmnElement="_3CD9910C-CF3B-4AEF-AB08-F51EA9978199">
        <dc:Bounds height="56.0" width="56.0" x="568.0" y="360.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA" bpmnElement="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA">
        <dc:Bounds height="102.0" width="154.0" x="1097.0" y="178.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__93593817-D3D6-48F9-B062-B59C802715AA" bpmnElement="_93593817-D3D6-48F9-B062-B59C802715AA">
        <dc:Bounds height="56.0" width="56.0" x="950.0" y="200.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__16896F13-C509-4B1F-8C32-A30AE51623B0" bpmnElement="_16896F13-C509-4B1F-8C32-A30AE51623B0">
        <dc:Bounds height="56.0" width="56.0" x="389.0" y="224.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE" bpmnElement="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE">
        <dc:Bounds height="102.0" width="154.0" x="698.0" y="337.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__16896F13-C509-4B1F-8C32-A30AE51623B0_to_shape__1DC0616D-FAF3-48BD-89FD-C80B9FC061D9" bpmnElement="_5CB56892-9F5B-4C1A-A195-39BEE2FD7E19">
        <di:waypoint xsi:type="dc:Point" x="417.0" y="252.0"/>
        <di:waypoint xsi:type="dc:Point" x="417.0009" y="185.0"/>
        <di:waypoint xsi:type="dc:Point" x="417.0009" y="224.0"/>
        <di:waypoint xsi:type="dc:Point" x="417.0" y="133.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__1DC0616D-FAF3-48BD-89FD-C80B9FC061D9_to_shape__BB60150A-B524-45C8-AEA3-E32322B96A60" bpmnElement="_ADE23ED9-ABF5-42DE-8369-417BFB70C30E">
        <di:waypoint xsi:type="dc:Point" x="417.0" y="82.0"/>
        <di:waypoint xsi:type="dc:Point" x="568.0" y="82.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__F19827B4-3027-407C-9748-7B82997CC616_to_shape__726AC429-57AF-4D0A-BBFB-4433496BCEB9" bpmnElement="_D9058452-9D9E-4337-866E-67632DD43D80">
        <di:waypoint xsi:type="dc:Point" x="59.0" y="252.0"/>
        <di:waypoint xsi:type="dc:Point" x="161.0" y="252.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__726AC429-57AF-4D0A-BBFB-4433496BCEB9_to_shape__16896F13-C509-4B1F-8C32-A30AE51623B0" bpmnElement="_99B3861C-478E-49AA-ADDD-62102809B0CD">
        <di:waypoint xsi:type="dc:Point" x="238.0" y="252.0"/>
        <di:waypoint xsi:type="dc:Point" x="389.0" y="252.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA_to_shape__0056CD9A-2489-44E5-B0B8-8CBDC0D1CB42" bpmnElement="_AA48F45F-1583-4B19-9D49-EA3B8BDD7004">
        <di:waypoint xsi:type="dc:Point" x="1174.0" y="229.0"/>
        <di:waypoint xsi:type="dc:Point" x="1342.0" y="228.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__BB60150A-B524-45C8-AEA3-E32322B96A60_to_shape__93593817-D3D6-48F9-B062-B59C802715AA" bpmnElement="_59452036-2EA8-414C-8B94-C53483323374">
        <di:waypoint xsi:type="dc:Point" x="596.0" y="82.0"/>
        <di:waypoint xsi:type="dc:Point" x="978.0" y="82.0"/>
        <di:waypoint xsi:type="dc:Point" x="978.0" y="200.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__BB60150A-B524-45C8-AEA3-E32322B96A60_to_shape__3CD9910C-CF3B-4AEF-AB08-F51EA9978199" bpmnElement="_A51EB380-F0FF-408C-9851-7CC2E606B0B4">
        <di:waypoint xsi:type="dc:Point" x="596.0" y="82.0"/>
        <di:waypoint xsi:type="dc:Point" x="597.0" y="172.0"/>
        <di:waypoint xsi:type="dc:Point" x="597.0" y="209.0"/>
        <di:waypoint xsi:type="dc:Point" x="596.0" y="360.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__16896F13-C509-4B1F-8C32-A30AE51623B0_to_shape__3CD9910C-CF3B-4AEF-AB08-F51EA9978199" bpmnElement="_D4419464-49DA-4745-8328-CC6BB604D206">
        <di:waypoint xsi:type="dc:Point" x="417.0" y="280.0"/>
        <di:waypoint xsi:type="dc:Point" x="416.0" y="318.0"/>
        <di:waypoint xsi:type="dc:Point" x="416.0" y="388.0"/>
        <di:waypoint xsi:type="dc:Point" x="473.0" y="388.0"/>
        <di:waypoint xsi:type="dc:Point" x="473.0" y="388.0"/>
        <di:waypoint xsi:type="dc:Point" x="485.0" y="388.0"/>
        <di:waypoint xsi:type="dc:Point" x="469.0" y="388.0"/>
        <di:waypoint xsi:type="dc:Point" x="485.0" y="388.0"/>
        <di:waypoint xsi:type="dc:Point" x="568.0" y="388.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__3CD9910C-CF3B-4AEF-AB08-F51EA9978199_to_shape__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE" bpmnElement="_99E8C1B1-5770-43BF-9DAA-300C24696F3A">
        <di:waypoint xsi:type="dc:Point" x="596.0" y="388.0"/>
        <di:waypoint xsi:type="dc:Point" x="698.0" y="388.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__93593817-D3D6-48F9-B062-B59C802715AA_to_shape__60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA" bpmnElement="_099BF8D1-9C99-4589-86B4-5D82D47F85DD">
        <di:waypoint xsi:type="dc:Point" x="978.0" y="228.0"/>
        <di:waypoint xsi:type="dc:Point" x="1097.0" y="229.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__B4D7B7C4-9E5F-4E45-B684-2C6854375FBE_to_shape__93593817-D3D6-48F9-B062-B59C802715AA" bpmnElement="_8E6B8D9E-D0A0-434F-981B-CA82436470BB">
        <di:waypoint xsi:type="dc:Point" x="775.0" y="388.0"/>
        <di:waypoint xsi:type="dc:Point" x="885.0" y="388.0"/>
        <di:waypoint xsi:type="dc:Point" x="885.0" y="228.0"/>
        <di:waypoint xsi:type="dc:Point" x="950.0" y="228.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmn2:relationship id="_iwQeQJyQEe22D6WH4M4Jpw" type="BPSimData">
    <bpmn2:extensionElements>
      <bpsim:BPSimData>
        <bpsim:Scenario xsi:type="bpsim:Scenario" id="default" name="Simulationscenario">
          <bpsim:ScenarioParameters xsi:type="bpsim:ScenarioParameters"/>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_1DC0616D-FAF3-48BD-89FD-C80B9FC061D9" id="_iwQeQZyQEe22D6WH4M4Jpw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_726AC429-57AF-4D0A-BBFB-4433496BCEB9" id="_iwQeQpyQEe22D6WH4M4Jpw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_F19827B4-3027-407C-9748-7B82997CC616" id="_iwQeQ5yQEe22D6WH4M4Jpw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_60F9D3D6-6DF8-4D44-AD8C-BBCEC8F487DA" id="_iwQeRJyQEe22D6WH4M4Jpw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_B4D7B7C4-9E5F-4E45-B684-2C6854375FBE" id="_iwQeRZyQEe22D6WH4M4Jpw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
        </bpsim:Scenario>
      </bpsim:BPSimData>
    </bpmn2:extensionElements>
    <bpmn2:source>_iwMz4JyQEe22D6WH4M4Jpw</bpmn2:source>
    <bpmn2:target>_iwMz4JyQEe22D6WH4M4Jpw</bpmn2:target>
  </bpmn2:relationship>
</bpmn2:definitions>
